define(["jquery","underscore","app/utils/utils","text!app/template/livres.html"],function(b,e,f,g){return function(h,k){this.init=function(a,d){this.parent=a;if(this.free=d){var c=this;f.load("listFree","",function(a){0===a.codeRetour&&(c.model=a.livres)},"GET")}else this.model=this.parent.livres;this.el=b(".mainPage .corps")};this.render=function(){e.templateSettings.variable="data";var a=e.template(g);this.el.html(a({livres:this.model}));this.makeEvents()};this.makeEvents=function(){b(".livre").mouseenter(function(){b(this).find(".loupe").show(200)});
b(".livre").mouseleave(function(){b(this).find(".loupe").hide(200)});var a=this;b(".livre").click(function(){var d=a.model,c=b(this).attr("key");c&&d[c]&&(a.free?a.parent.lecture(d[c]):a.parent.consult(d[c]))})};this.show=function(){this.render()};this.init(h,k)}});