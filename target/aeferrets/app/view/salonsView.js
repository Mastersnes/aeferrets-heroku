define("jquery underscore app/utils/utils app/utils/tracking app/utils/mediaUtils text!app/template/salons.html app/model/salonsModel".split(" "),function(a,f,g,k,l,m,n){return function(p){this.init=function(b){this.parent=b;this.el=a(".mainPage .corps");this.model=new n;this.mediaUtils=new l};this.render=function(){f.templateSettings.variable="data";var a=f.template(m);this.el.html(a({}));this.makeEvents()};this.renderSalons=function(){var b=this.listSalons[this.select];a(".salons .date").html(g.formatDate(b.date));
k.push("Affichage du salons "+b.titre);a(".salons .titre").html(b.titre);this.mediaUtils.renderImage(".salons",b.image);this.mediaUtils.renderVideo(".salons",b.video);a(".salons .resume").html(b.texte);"next"===this.model.data.date?(a(".salons .preview").html("Suivant \x26gt;\x26gt;"),a(".salons .next").html("\x26lt;\x26lt; Pr\x26eacute;c\x26eacute;dent")):(a(".salons .next").html("\x26lt;\x26lt; Suivant"),a(".salons .preview").html("Pr\x26eacute;c\x26eacute;dent \x26gt;\x26gt;"));0<this.select?(a(".salons .next").show(),
a(".salons .preview").css("width","50%")):(a(".salons .next").hide(),a(".salons .preview").css("width","100%"));this.select<this.listSalons.length-1?(a(".salons .preview").show(),a(".salons .next").css("width","50%")):(a(".salons .preview").hide(),a(".salons .next").css("width","100%"))};this.renderListSalons=function(){a(".salons .date").html("");a(".salons .titre").html("");a(".salons .img").html("");a(".salons .video").html("");var b=document.createElement("ul");a(b).addClass("menu-liste");var c=
this;this.listSalons.forEach(function(d,f){var e=document.createElement("li"),h=document.createElement("strong");a(h).html(g.formatDate(d.date));a(e).append(h);a(e).append(" - "+d.titre);a(e).attr("key",f);a(b).append(e);a(e).click(function(b){b.preventDefault();c.select=a(this).attr("key");c.renderSalons()})});a(".salons .resume").html(b);a(".salons .next").hide();a(".salons .preview").hide()};this.makeEvents=function(){this.mediaUtils.makeEvents();var b=this;a("#preview, #current").click(function(){b.model.setDate(a(this).attr("id"));
b.load()});a("#next").click(function(){b.model.setDate(a(this).attr("id"));b.load(!0)});a(".salons .preview").click(function(){b.select++;b.renderSalons()});a(".salons .next").click(function(){b.select--;b.renderSalons()})};this.show=function(){this.model.setDate("current");this.select=0;this.render();this.load()};this.load=function(a){var c=this;g.load("salons",this.model.data,function(d){0===d.codeRetour&&(c.listSalons=d.salons,c.select=a?c.listSalons.length-1:0,1<c.listSalons.length?c.renderListSalons():
c.renderSalons())},"POST")};this.init(p)}});