define(["jquery","app/utils/utils"],function(a,f){return function(){this.makeEvents=function(){var c=this;a(".grosseImage .mask, .grosseImage .close, .grosseImage img").click(function(){a(".grosseImage").hide("slow")});a(".grosseImage .preview").click(function(){var b=c.getCurrentImg().prev("img");a(".grosseImage img").attr("src",b.attr("src"));a(".grosseImage img").attr("alt",b.attr("alt"));c.checkGrosseImg()});a(".grosseImage .next").click(function(){var b=c.getCurrentImg().next("img");a(".grosseImage img").attr("src",
b.attr("src"));a(".grosseImage img").attr("alt",b.attr("alt"));c.checkGrosseImg()})};this.renderImage=function(c,b){a(c).find(".img").empty();if(b){if(b instanceof Array)for(var d in b)this.createImage(c,b[d]);else this.createImage(c,b);var e=this;a(c).find("img").click(function(){a(".grosseImage img").attr("src",a(this).attr("src"));a(".grosseImage img").attr("alt",a(this).attr("alt"));a(".grosseImage").show("slow");e.checkGrosseImg()})}};this.createImage=function(c,b){if(null==b||void 0==b||""==
b)return null;var d=document.createElement("img");a(d).attr("alt",b);a(d).attr("src",b);a(c).find(".img").append(a(d));a(d).on("load",function(){a(this).animate({opacity:"1",filter:"alpha(opacity\x3d100)"})})};this.renderVideo=function(c,b){a(c).find(".video").empty();if(b)if(b instanceof Array)for(var d in b)this.createVideo(c,b[d]);else this.createVideo(c,b)};this.createVideo=function(c,b){if(null==b||void 0==b||""==b)return null;var d=document.createElement("iframe");a(d).attr("controls","true");
var e=b;b&&b.match(/(?:youtu|youtube)(?:\.com|\.be)\/([\w\W]+)/i)&&(e="https://www.youtube.com/embed/"+f.getUrlParameter(e).v.toString());b&&b.match(/(?:facebook)(?:\.com|\.fr)\/([\w\W]+)/i)&&(e="https://www.facebook.com/plugins/video.php?href\x3d"+e);a(d).attr("src",e);a(c).find(".video").append(a(d))};this.getCurrentImg=function(){var c=a(".grosseImage img").attr("src");return a("img[src\x3d'"+c+"']")};this.checkGrosseImg=function(){var c=this.getCurrentImg();0==c.next("img").length?a(".grosseImage .next").hide():
a(".grosseImage .next").show();0==c.prev("img").length?a(".grosseImage .preview").hide():a(".grosseImage .preview").show()}}});